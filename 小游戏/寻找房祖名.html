<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>寻找房租名</title>
        <style type="text/css">
            .container{
                width:400px;
                height:550px;
                margin:0 auto;
                background-color: #ccc;
                position: relative;
                font-size: 20px;
            }
            .timeBox{
                float:left;
                margin:20px 0 0 20px;
            }
            .scoreBox{
                float:right;
                margin:20px 20px 0 0;
            }
            button{
                width: 50px;
                height:40px;
                background-color: green;
                position: absolute;
                left: 50%;
                margin-left: -25px;
                font-size: 18px;
                color:#fff;
                line-height:40px;
                border:0px;
                top:60px;
            }
            img{
                width:100%;
                margin:10px 0 0 10px;
            }
            .imgBox{
                width:280px;
                /*height:280px;*/
                position: absolute;
                left: 50%;
                margin-left: -140px;
                top:50%;
                margin-top:-140px;
            }
        </style>
    </head>
    <body>
        <div class="box">
            <div class="container">
                <div class="timeBox">剩余时间：<span class="time"></span>秒</div>
                <div class="scoreBox">分数：<span class="score"></span></div>
                <button>开始</button>
               <div class="imgBox"><img src="images/1.png"></div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        var btn=document.querySelector('button');
        var img=document.querySelector('img');
        var imgBox=document.querySelector('.imgBox');
        var score=document.querySelector('.score');
        var time=document.querySelector('.time');
        var bgColor=["#339966","#0099FF","#6600FF","#993366","#FF3399","#FFCC99","#CCCC99","#66FFCC","#CC3300"];
        var beishu=1;
        var scoreCount=0;
        var timeCount=60;
        var gameOver=false;
        //初始化数据
        score.innerHTML=scoreCount;
        time.innerHTML=timeCount.toFixed(2);
        btn.onclick=function(){
            btn.style.display='none';
            createImg();
            var timer=setInterval(function(){
                if(timeCount==0.00){
                    clearInterval(timer);
                    alert('游戏结束');
                    var fzmImg=document.querySelector('.fzm');
                    fzmImg.onclick=null;
                    gameOver=true;
                }else{
                    timeCount=(timeCount-0.1).toFixed(2);
                    time.innerHTML=timeCount;
                }
            },100)
        }
        function createImg(){
            if(!gameOver){
                imgBox.innerHTML='';
                var randomColorIndex=Math.floor(Math.random()*9);
                if(beishu<9){
                    beishu++;
                }
                var imgNumber=Math.pow(beishu,2);//图片总张数
                for(var i=0;i<imgNumber;i++){
                    //创建图片初始化都为柯正东图片
                    newImg=document.createElement('img');
                    newImg.setAttribute('src','images/1.png');
                    imgBox.appendChild(newImg);
                    //每次创建图片的宽度=（容器总宽度-外边距）/每行图片的张数
                    newImg.style.width=(imgBox.offsetWidth-10*beishu)/beishu+'px';
                    //每次创建图片的颜色
                    newImg.style.backgroundColor=bgColor[randomColorIndex];
                }
                //随机一张图片是房祖名
                var fzmIndex=parseInt(Math.random()*imgNumber);
                imgBox.childNodes[fzmIndex].src='images/2.png';
                imgBox.childNodes[fzmIndex].className='fzm';
//              console.log(gameOver)
                console.log('11111');
                fzmClick();
            }
        }
        function fzmClick(){
            var fzmImg=document.querySelector('.fzm');
            fzmImg.onclick=function() {
                // if(!gameOver) {
                    console.log(gameOver)
                    scoreCount++;
                    score.innerHTML=scoreCount;
                    createImg();
                // }
            }
        }
    </script>
</html>